<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" 
content="width=device-width,initial-scale=1.0">
    <title>Sharon's Blog</title>
    <!-- 載入 Bootstrap 5.3 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" xintegrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
   <script scr="https://cdn.tailwindcss.com"></script>
  <style>
    /* 定義一個客製化的深藍綠色系 (Deep Teal Palette) */
    :root {
      --sharon-teal-dark: #00796b; /* 主強調色：深青色 (用於 Nav/Footer/Fact Card) */
      --sharon-teal-light: #e0f2f1; /* 背景色：極淺青色 (Body background) */
      --sharon-link: #004d40; /* 連結色：更深的青色 */
      --sharon-accent: #ffb300; /* 次強調色：琥珀色 (用於 Daily Fact 邊框/About Me highlight) */
    }

    /* 預設樣式 */
    body {
      font-family: 'Inter', Arial, sans-serif; /* 使用更現代的字體 */
      font-size: 20px;
      background-color: var(--sharon-teal-light); /* 統一使用極淺青色背景 */
      color: #333; /* 確保主文字顏色夠深 */
    }

    /* 客製化深青色背景 (應用於 Nav, Footer, Daily Fact) */
    .bg-sharon-dark {
        background-color: var(--sharon-teal-dark) !important;
    }
    
    /* 客製化醒目文字 (用於 About Me 區塊的強調詞) */
    .text-sharon-emphasis {
        color: var(--sharon-teal-dark) !important;
        font-weight: 700;
        background-color: #ffffff90; /* 讓背景有一點點提亮 */
        padding: 0 4px;
        border-radius: 4px;
    }
    
    a {
        color: var(--sharon-link); /* 連結顏色 */
        text-decoration: none; /* 移除預設底線 */
        transition: color 0.3s;
    }
    a:hover {
        color: var(--sharon-teal-dark);
    }

    /* 確保 aside 的浮動和寬度在桌面版有效 */
    aside {
        width: 30%; 
        float: right;
    }
    
    /* 每日小知識卡片美化 */
    .daily-fact-card {
        border-left: 8px solid var(--sharon-accent) !important; /* 左側醒目琥珀色邊框 */
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); /* 提升陰影 */
    }
    
    /* 圖片 hover 效果 */
    .hover-scale {
        transition: transform 0.3s ease-in-out;
    }
    .hover-scale:hover {
        transform: scale(1.05);
    }
    .hover-shadow:hover {
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.2), 0 10px 10px -5px rgba(0, 0, 0, 0.04) !important;
    }

    /* --- 影片點擊播放按鈕樣式 (RWD) --- */
    .video-placeholder {
        position: relative;
        cursor: pointer;
    }
    .video-placeholder img {
        display: block;
        transition: opacity 0.3s;
        object-fit: cover; /* 確保圖片填滿容器 */
        width: 100%;
        height: 100%;
        position: absolute;
    }
    .video-placeholder:hover img {
        opacity: 0.8;
    }
    .play-button {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 80px;
        height: 55px;
        background-color: rgba(255, 0, 0, 0.85); /* YouTube Red */
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: transform 0.2s;
        z-index: 10;
    }
    .play-button::before {
        content: '';
        border-style: solid;
        border-width: 14px 0 14px 22px;
        border-color: transparent transparent transparent #fff;
        margin-left: 5px; /* Adjust triangle position */
    }
    .video-placeholder:hover .play-button {
        transform: translate(-50%, -50%) scale(1.1);
    }
    /* --- 結束：影片點擊播放按鈕樣式 --- */
    /* --- 遊戲專用樣式 --- */
    #game-container {
    width: 100%;
    aspect-ratio: 320 / 576; /* 鎖定畫布比例 */
    background-color: #4b5563;
    border-radius: 1rem 1rem 0 0; /* 只圓角上方 */
    overflow: hidden;
    position: relative;
}

#gameCanvas {
    width: 100%;
    height: 100%;
    display: block;
    background-color: #7dd3fc;
    touch-action: manipulation;
}

#controls {
    border-radius: 0 0 1rem 1rem; /* 只圓角下方，跟遊戲接合 */
}
    /* --- 結束：遊戲專用樣式 --- */
    /* 手機樣式 (小於 768px) */
    @media (max-width: 767px) { 
      body {
        font-size: 16px; background-color: #a3d5b3;
      }
      /* 手機上 aside 移除浮動，讓它在主內容上方全寬顯示 */
      aside {
          width: 100%;
          float: none; 
      }
      /* 手機上 Daily Fact 移除左邊框，改用頂部邊框 */
      .daily-fact-card {
         border-left: none !important;
         border-top: 4px solid var(--sharon-accent) !important;
      }
    }

    /* 平板樣式 (768px 到 991px) */
    @media (min-width: 768px) and (max-width: 991px) { 
      body {
        font-size: 18px; 
    }
  }
  </style>
</head>

<body>
    <div class="container-fluid py-4">
        
        <header>
            <!-- 標題：使用 text-dark 確保對比度 -->
            <h1 class="text-dark text-center mb-4 fw-bold">Sharon 的小天地</h1> 
            
            <!-- 導航列：使用客製化深青色背景，並加上陰影 -->
            <nav class="navbar navbar-expand-lg navbar-dark bg-sharon-dark text-white rounded-3 mb-4 shadow-lg">
                <div class="container-fluid">
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse justify-content-center" id="navbarNav">
                        <ul class="navbar-nav fs-5"> 
                            <!-- 新增/調整主要導覽項目 -->
                            <li class="nav-item"><a class="nav-link fw-bold" href="#">首頁</a></li>
                            <li class="nav-item"><a class="nav-link" href="#section1">關於我</a></li>
                            <li class="nav-item"><a class="nav-link" href="#contact">聯絡我</a></li>
                            
                            <!-- 詳細內容區塊 -->
                            <li class="nav-item"><a class="nav-link" href="#section2">工作經歷</a></li>
                            <li class="nav-item"><a class="nav-link" href="#section3">串珠展示</a></li>
                            <li class="nav-item"><a class="nav-link" href="#section4">影音作品</a></li>
                            <li class="nav-item"><a class="nav-link" href="#section8">專案/作品集</a></li>
                            <li class="nav-item"><a class="nav-link" href="#section5">美食分享</a></li>
                            <li class="nav-item"><a class="nav-link" href="#section6">展覽分享</a></li>
                            <li class="nav-item"><a class="nav-link" href="#section7">更多資訊</a></li>
                        </ul>
                    </div>
                </div>
            </nav>
        </header>
        
        

        <main class="row">
            
            <aside class="col-12 col-md-4 mb-4">
                <blockquote class="p-4 border rounded-3 bg-sharon-dark text-white text-center daily-fact-card"> 
                    <h3 class="text-warning fw-bold border-bottom pb-2 mb-3">每日小知識</h3>
                    <p class="mb-4">烏鴉是地球上最聰明的動物之一!!</p>
                    <!-- 已加入 d-block mx-auto 確保圖片置中 -->
                    <img 
                        src="assets/images/crow.png" 
                        alt="crow picture" 
                        class="img-fluid rounded-circle shadow-lg d-block mx-auto" 
                        style="width: 150px; height: 150px; object-fit: cover; border: 4px solid var(--sharon-accent);"
                        onerror="this.src='https://via.placeholder.com/150?text=Crow'; this.onerror=null;"
                    >
                </blockquote>
            </aside>


            <div class="col-12 col-md-8"> 

                <article id="section1" class="mb-5 p-4 bg-white rounded-3 shadow-sm">
                    <header>
                        <h2>About Me</h2>
                        <p class="lead">三麗鷗&amp;迪士尼&amp;tamagotchi狂粉，超級想要tamagotchi paradise (aka 最新機型 OMG超讚!!</p>
                    </header>
                    <section class="d-flex align-items-center mb-3"> 
                        <img src="assets\images\ovlo.jpg" alt="Sharon picture" class="img-fluid rounded-circle me-4 shadow" style="width: 150px; height: 150px; object-fit: cover;">
                        <div>
                            <h1 class="display-6">李盈萱</h1>
                            <p class="lead"> 
                                <span class="fw-bold">
                                    <a href="https://www.ntue.edu.tw/">國立台北教育大學</a>
                                </span>
                                資訊科學系在學學生
                            </p>
                        </div>
                    </section>
                    <section>
                        <p>我是一位大學生!!雖然是資訊科學系學生，但喜歡
                            <span class="text-sharon-emphasis">串珠</span> 和 
                            <span class="text-sharon-emphasis">吃東西</span>，並致力於 
                            <span class="text-sharon-emphasis">買珠子</span> 與 
                            <span class="text-sharon-emphasis">在家耍廢</span>!!
                        </p>
                    </section>
                </article>

                <article id="section2" class="mb-5 p-4 bg-white rounded-3 shadow-sm">
                    <header>
                        <h2>工作經歷</h2>
                    </header>
                    <section>
                        <table class="table table-bordered table-hover">
                            <thead class="bg-sharon-dark text-white">
                                <tr>
                                    <th>Dates</th>
                                    <th>Work</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>2025</td>
                                    <td>巨量移動有限公司_AI部門實習生</td>
                                </tr>
                                <tr>
                                    <td>2025-2024</td>
                                    <td>YMCA游泳教練</td>
                                </tr>
                            </tbody>
                        </table>
                    </section>
                </article>

                <article id="section3" class="mb-5 p-4 bg-white rounded-3 shadow-sm">
                    <header>
                        <h2>串珠展示</h2>
                    </header>
                    <section class="row text-center">
                        <div class="col-12 col-md-4 mb-4">
                            <div class="border p-3 bg-light rounded-3 shadow-sm hover-shadow">
                                <img src="assets\images\DNA.jpg" alt="彩色DNA" class="img-fluid w-100  mb-2 rounded shadow-sm hover-scale" style="height: 200px; object-fit: cover;">
                                <p class="fw-bold mb-0 text-sharon-dark">彩色DNA</p>
                            </div>
                        </div>
                        <div class="col-12 col-md-4 mb-4">
                            <div class="border p-3 bg-light rounded-3 shadow-sm hover-shadow">
                                <img src="assets\images\dog.jpg" alt="小狗圓舞曲" class="img-fluid w-100 mb-2 rounded shadow-sm hover-scale" style="height: 200px; object-fit: cover;">
                                <p class="fw-bold mb-0 text-sharon-dark">小狗圓舞曲</p>
                            </div>
                        </div>
                        <div class="col-12 col-md-4 mb-4">
                            <div class="border p-3 bg-light rounded-3 shadow-sm hover-shadow">
                                <img src="assets\images\summer.jpg" alt="夏日小波" class="img-fluid w-100 mb-2 rounded shadow-sm hover-scale" style="height: 200px; object-fit: cover;">
                                <p class="fw-bold mb-0 text-sharon-dark">夏日小波</p>
                            </div>
                        </div>
                    </section>
                </article>

                <article id="section4" class="mb-5 p-4 bg-white rounded-3 shadow-sm">
                    <h2>影音作品</h2>
                    <p>
                        <em>
                            <strong class="text-sharon-dark">
                                <a href="https://suno.com/s/MhX7BaUQomVkkjWI">在suno創作的音樂</a>
                            </strong>:此音樂為模仿泰勒斯風格的音樂，本人也是手扶梯
                        </em>
                    </p>
                    <p><p>
                        <em>
                            <strong class="text-sharon-dark">
                                <a href="https://youtu.be/4-X5QGIwiP8">用Gemini 3 製作的影片</a>
                            </strong>:此影片為一個小女孩跟小狗玩耍的過程，以及與家人的互動
                        </em>
                    </p>
                    <p>
                        <em>推薦幾首好聽的歌:
                            <strong class="text-sharon-dark">
                                <a href="https://www.youtube.com/watch?v=3PJC6uPIekc&list=RD3PJC6uPIekc&start_radio=1">Opalite</a>
                            </strong>、
                            <strong class="text-sharon-dark">
                                <a href="https://www.youtube.com/watch?v=sRxrwjOtIag&list=RDsRxrwjOtIag&start_radio=1">All Too Well</a>
                            </strong>、
                            <strong class="text-sharon-dark">
                                <a href="https://www.youtube.com/watch?v=osdoLjUNFnA&list=RDosdoLjUNFnA&start_radio=1">exile</a>
                            </strong>
                        </em>
                    </p>
                </article>

                <article id="section8" class="mb-5 p-4 bg-white rounded-3 shadow-sm">
                    <h2>專案/作品集</h2>
                    <p class="mb-3">
                        <a href="https://www.youtube.com/watch?v=ou-M5ehu7f0" class="text-sharon-dark fw-bold">結合ＡＩ工具製作的廣告作品</a>
                    </p>
                    <div id="video-wrapper" class="ratio ratio-16x9 mb-4 rounded-3 shadow-md video-placeholder" data-video-id="ou-M5ehu7f0" onclick="loadYouTubeVideo('video-wrapper')">
                        <img src="https://img.youtube.com/vi/ou-M5ehu7f0/hqdefault.jpg" alt="YouTube 影片縮圖" class="img-fluid rounded-3">
                        <div class="play-button"></div>
                    </div>
                </article>
                
                <!-- Flappy Bird 遊戲區塊 -->
          <article id="section9" class="mb-5 p-4 bg-white rounded-3 shadow-sm text-center">
            <h2>Flappy Bird 數學挑戰遊戲</h2>
            <p class="lead text-sharon-dark">鳥兒的數學冒險</p>
            
            <div style="max-width: 320px; margin: 0 auto;">
                <div id="game-container">
                    <canvas id="gameCanvas"></canvas>
                </div>

                <div id="controls" class="p-3 text-center text-white bg-dark rounded-bottom">
                    <div class="d-flex justify-content-around mb-2">
                        <p class="mb-0">得分: <span id="scoreDisplay" class="font-bold text-warning">0</span></p>
                        <p class="mb-0">最高: <span id="bestScoreDisplay" class="font-bold text-success">0</span></p>
                    </div>
                    <p id="messageDisplay" class="mb-0 text-info small">點擊畫面開始遊戲</p>
                </div>
            </div>
        </article>

                <article id="section5" class="mb-5 p-4 bg-white rounded-3 shadow-sm">
                    <h2>美食分享</h2>
                    <div class="row row-cols-2 row-cols-md-4 g-3 text-center">
                        <div class="col"><img src="assets/images/regent.jpg" alt="聖誕樹冰淇淋" class="img-fluid rounded-3 shadow-md hover-scale" ></div>
                        <div class="col"><img src="assets/images/c1.jpg" alt="超好吃可麗餅1" class="img-fluid rounded-3 shadow-md hover-scale" ></div>
                        <div class="col"><img src="assets/images/gelato.jpg" alt="義式冰淇淋" class="img-fluid rounded-3 shadow-md hover-scale" ></div>
                        <div class="col"><img src="assets/images/c2.jpg" alt="超好吃可麗餅2" class="img-fluid rounded-3 shadow-md hover-scale" ></div>
                    </div>
                </article>

                <article id="section6" class="mb-5 p-4 bg-white rounded-3 shadow-sm">
                    <h2>展覽分享</h2>
                    <div class="d-flex flex-wrap justify-content-around">
                        <figure class="text-center p-2">
                            <img src="assets\images\dudu.jpg" alt="吉卜力展" class="img-fluid rounded-3 shadow-md hover-scale" width="150">
                            <figcaption class="mt-2 fw-medium text-sharon-dark">吉卜力展</figcaption>
                        </figure>
                        <figure class="text-center p-2">
                            <img src="assets\images\paint.jpg" alt="波隆納插畫展" class="img-fluid rounded-3 shadow-md hover-scale" width="150">
                            <figcaption class="mt-2 fw-medium text-sharon-dark">波隆納插畫展</figcaption>
                        </figure>
                        <figure class="text-center p-2">
                            <img src="assets\images\lab.jpg" alt="東京的TEAMLAB" class="img-fluid rounded-3 shadow-md hover-scale" width="150">
                            <figcaption class="mt-2 fw-medium text-sharon-dark">東京的TEAMLAB</figcaption>
                        </figure>
                    </div>
                </article>

                <article id="section7" class="mb-5 p-4 bg-white rounded-3 shadow-sm">
                    <h2>更多資訊</h2>
                    <div class="accordion mb-3" id="jokeAccordion">
                        <div class="accordion-item shadow-sm">
                            <h2 class="accordion-header" id="headingOne">
                                <button class="accordion-button collapsed bg-light" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                                    點擊查看冷笑話 (點擊展開)
                                </button>
                            </h2>
                            <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#jokeAccordion">
                                <div class="accordion-body">
                                    <p>Why did the bike fall over?<br>Because it was two tired!</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </article>
            </div>
        </main>
        
        <footer id="contact" class="text-center py-3 mt-4 bg-sharon-dark text-white rounded-3 shadow-lg"> 
            <p class="mb-1">合作邀約：S111216040@stu.ntue.edu.tw</p>
            <time datetime="2026-2-30" class="small">最後更新日期：2026年2月30日</time>
        </footer>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/js/bootstrap.bundle.min.js"></script> 
    
    <!-- 遊戲邏輯 -->
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreDisplay = document.getElementById('scoreDisplay');
        const bestScoreDisplay = document.getElementById('bestScoreDisplay');
        const messageDisplay = document.getElementById('messageDisplay');


        // --- 基礎物理參數 ---
        const BIRD_SIZE = 25;
        const PIPE_WIDTH = 50;
        const PIPE_GAP = 180; 
        const GRAVITY = 0.35;
        const LIFT = -6.5;    
        const BASE_PIPE_SPEED = 1.5; 
        const PIPE_SPAWN_INTERVAL = 110;

        const GROUND_HEIGHT = 80;
        const ANSWER_BLOCK_SIZE = 40; 
        const PLAYER_NAME_DISPLAY = '李盈萱';

        let gameLoop;
        let frame = 0;
        let score = 0;
        let bestScore = 0;
        let gameState = 'ready'; 
        let pipes = [];
        let pipeSpeed = BASE_PIPE_SPEED;
        let flashEffect = 0; // 用於答對時的畫面閃爍效果

        const bird = {
            x: 60,
            y: canvas.height / 2,
            velocity: 0,
            angle: 0,
            draw() {
                ctx.save();
                ctx.translate(this.x, this.y);
                ctx.rotate(this.angle);
                
                // 身體：根據得分高低改變小鳥色調 (已調整門檻為 5 分)
                ctx.fillStyle = score >= 5 ? '#f97316' : '#fde047'; 
                ctx.beginPath();
                ctx.ellipse(0, 0, BIRD_SIZE * 0.7, BIRD_SIZE * 0.5, 0, 0, Math.PI * 2);
                ctx.fill();
                
                // 翅膀
                ctx.fillStyle = '#fdb447';
                ctx.beginPath();
                ctx.moveTo(-BIRD_SIZE * 0.4, -BIRD_SIZE * 0.3);
                ctx.lineTo(-BIRD_SIZE * 0.8, -BIRD_SIZE * 0.1);
                ctx.lineTo(-BIRD_SIZE * 0.4, 0);
                ctx.closePath();
                ctx.fill();
                
                // 嘴巴
                ctx.fillStyle = '#e67e22';
                ctx.beginPath();
                ctx.moveTo(BIRD_SIZE * 0.5, 0);
                ctx.lineTo(BIRD_SIZE * 0.8, -3);
                ctx.lineTo(BIRD_SIZE * 0.8, 3);
                ctx.closePath();
                ctx.fill();
                
                // 眼睛
                ctx.fillStyle = '#000000';
                ctx.beginPath();
                ctx.arc(BIRD_SIZE * 0.2, -BIRD_SIZE * 0.15, 2, 0, Math.PI * 2);
                ctx.fill();
                ctx.restore();
            },
            update() {
                if (gameState === 'playing') {
                    this.velocity += GRAVITY;
                    this.y += this.velocity;
                    this.angle = Math.min(Math.PI / 4, Math.max(-Math.PI / 2, this.velocity * 0.1));
                }
            },
            flap() {
                if (gameState === 'playing') {
                    this.velocity = LIFT;
                } else {
                    resetGame();
                    gameState = 'playing';
                    messageDisplay.textContent = '遊戲進行中...';
                }
            }
        };

        // 生成隨機數學問題 (混合加法與乘法)
        function generateMathProblem() {
            const isMultiplication = Math.random() < 0.7; // 70% 乘法, 30% 加法
            let num1, num2, answer, question;

            if (isMultiplication) {
                num1 = Math.floor(Math.random() * 8) + 2;
                num2 = Math.floor(Math.random() * 8) + 2;
                answer = num1 * num2;
                question = `${num1} × ${num2} = ?`;
            } else {
                num1 = Math.floor(Math.random() * 50) + 10;
                num2 = Math.floor(Math.random() * 50) + 10;
                answer = num1 + num2;
                question = `${num1} + ${num2} = ?`;
            }

            let incorrect;
            do { 
                incorrect = answer + (Math.random() < 0.5 ? 1 : -1) * (Math.floor(Math.random() * 5) + 1); 
            } while (incorrect === answer || incorrect < 1);

            return { question, answer, incorrect, correctPosition: Math.random() < 0.5 ? 0 : 1 };
        }

        function Pipe() {
            const problem = generateMathProblem();
            const minH = 50 + ANSWER_BLOCK_SIZE;
            const maxH = canvas.height - GROUND_HEIGHT - 50 - PIPE_GAP - ANSWER_BLOCK_SIZE; 
            this.gapY = Math.random() * (maxH - minH) + minH;
            this.x = canvas.width;
            this.passed = false;
            this.problem = problem;
            this.hitCorrect = false;
            
            const middleY = this.gapY + PIPE_GAP / 2;
            const offset = ANSWER_BLOCK_SIZE * 1.5;
            this.answerBlocks = [
                { x: this.x + PIPE_WIDTH/2 - ANSWER_BLOCK_SIZE/2, y: middleY - offset, value: problem.correctPosition === 0 ? problem.answer : problem.incorrect, isCorrect: problem.correctPosition === 0 },
                { x: this.x + PIPE_WIDTH/2 - ANSWER_BLOCK_SIZE/2, y: middleY + offset - ANSWER_BLOCK_SIZE, value: problem.correctPosition === 1 ? problem.answer : problem.incorrect, isCorrect: problem.correctPosition === 1 }
            ];
            
            this.draw = function() {
                ctx.fillStyle = '#16a34a';
                ctx.fillRect(this.x, 0, PIPE_WIDTH, this.gapY);
                ctx.fillStyle = '#10b981'; 
                ctx.fillRect(this.x - 5, this.gapY - 15, PIPE_WIDTH + 10, 15);
                ctx.fillStyle = '#16a34a'; 
                ctx.fillRect(this.x, this.gapY + PIPE_GAP, PIPE_WIDTH, canvas.height - (this.gapY + PIPE_GAP) - GROUND_HEIGHT);
                ctx.fillStyle = '#10b981';
                ctx.fillRect(this.x - 5, this.gapY + PIPE_GAP, PIPE_WIDTH + 10, 15);
                
                ctx.font = 'bold 18px "Inter"';
                ctx.textAlign = 'center';
                for (const block of this.answerBlocks) {
                    // 修改處：將方塊填色統一為靛藍色，不再區分正確與錯誤
                    ctx.fillStyle = '#6366f1'; 
                    ctx.fillRect(block.x, block.y, ANSWER_BLOCK_SIZE, ANSWER_BLOCK_SIZE);
                    ctx.fillStyle = 'white';
                    ctx.fillText(block.value.toString(), block.x + ANSWER_BLOCK_SIZE / 2, block.y + ANSWER_BLOCK_SIZE / 2 + 5);
                }
                ctx.fillStyle = 'black';
                ctx.font = 'bold 22px "Noto Sans TC"';
                ctx.fillText(this.problem.question, this.x + PIPE_WIDTH / 2, this.gapY - 25);
            };

            this.update = function() {
                if (gameState === 'playing') {
                    this.x -= pipeSpeed;
                    this.answerBlocks[0].x = this.x + PIPE_WIDTH / 2 - ANSWER_BLOCK_SIZE / 2;
                    this.answerBlocks[1].x = this.x + PIPE_WIDTH / 2 - ANSWER_BLOCK_SIZE / 2;
                }
            };
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // 繪製水管與小鳥
            for (const pipe of pipes) pipe.draw();
            bird.draw();
            
            // 答對時的閃爍效果
            if (flashEffect > 0) {
                ctx.fillStyle = `rgba(52, 211, 153, ${flashEffect})`;
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                flashEffect -= 0.05;
            }

            // 地面
            ctx.fillStyle = '#9c815c'; ctx.fillRect(0, canvas.height - GROUND_HEIGHT, canvas.width, GROUND_HEIGHT);
            ctx.fillStyle = '#4b7528'; ctx.fillRect(0, canvas.height - GROUND_HEIGHT, canvas.width, 15);
            
            // 文字 UI
            ctx.textAlign = 'center';
            ctx.fillStyle = '#fef3c7'; ctx.font = '20px "Noto Sans TC"'; ctx.fillText(PLAYER_NAME_DISPLAY, canvas.width / 2, 30);
            
            // 當前 Level 顯示
            const level = Math.floor(score / 5) + 1;
            ctx.fillStyle = '#fbbf24'; ctx.font = '14px "Inter"'; ctx.fillText(`LEVEL ${level}`, canvas.width / 2, 50);

            if (gameState === 'ready') {
                ctx.fillStyle = 'rgba(0,0,0,0.6)'; ctx.fillRect(0, canvas.height/3, canvas.width, canvas.height/4);
                ctx.fillStyle = 'white'; ctx.font = 'bold 28px "Inter"'; ctx.fillText('Flappy Bird', canvas.width/2, canvas.height/2-15);
                ctx.font = '16px "Noto Sans TC"'; ctx.fillText('挑戰遊戲，點擊滑鼠、空白鍵開始', canvas.width/2, canvas.height/2+15);
            } else if (gameState === 'gameover') {
                ctx.fillStyle = 'rgba(128,0,0,0.8)'; ctx.fillRect(0, canvas.height/3, canvas.width, canvas.height/4);
                ctx.fillStyle = 'white'; ctx.font = 'bold 28px "Noto Sans TC"'; ctx.fillText('遊戲結束', canvas.width/2, canvas.height/2-15);
                ctx.font = '16px "Noto Sans TC"'; ctx.fillText(`得分: ${score} | 點擊擊滑鼠、空白鍵重玩`, canvas.width/2, canvas.height/2+15);
            }
        }
        
        function checkCollision() {
            if (bird.y + BIRD_SIZE/2 > canvas.height - GROUND_HEIGHT || bird.y - BIRD_SIZE/2 < 0) return true;
            for (const pipe of pipes) {
                if (bird.x + BIRD_SIZE/2 > pipe.x && bird.x - BIRD_SIZE/2 < pipe.x + PIPE_WIDTH) {
                    if (bird.y - BIRD_SIZE/2 < pipe.gapY || bird.y + BIRD_SIZE/2 > pipe.gapY + PIPE_GAP) return true;
                    for (const block of pipe.answerBlocks) {
                        if (bird.x + BIRD_SIZE/2 > block.x && bird.x - BIRD_SIZE/2 < block.x + ANSWER_BLOCK_SIZE &&
                            bird.y + BIRD_SIZE/2 > block.y && bird.y - BIRD_SIZE/2 < block.y + ANSWER_BLOCK_SIZE) {
                            if (block.isCorrect) {
                                if (!pipe.hitCorrect) flashEffect = 0.3; // 觸發閃爍
                                pipe.hitCorrect = true; 
                            } else {
                                return true;
                            }
                        }
                    }
                }
                if (!pipe.passed && pipe.x + PIPE_WIDTH < bird.x - BIRD_SIZE/2) {
                    if (!pipe.hitCorrect) return true; // 沒答對就通過會輸掉
                    score++; 
                    if (score > bestScore) {
                        bestScore = score;
                        bestScoreDisplay.textContent = bestScore;
                    }
                    pipe.passed = true; 
                    scoreDisplay.textContent = score;
                    
                    // 難度增加邏輯：每 5 分增加一點速度
                    pipeSpeed = BASE_PIPE_SPEED + (Math.floor(score / 5) * 0.3);
                }
            }
            return false;
        }

        function gameLoopFn() {
            if (gameState === 'playing') {
                frame++; bird.update();
                if (frame % PIPE_SPAWN_INTERVAL === 0) pipes.push(new Pipe());
                for (let i = pipes.length - 1; i >= 0; i--) {
                    pipes[i].update();
                    if (pipes[i].x < -PIPE_WIDTH) pipes.splice(i, 1);
                }
                if (checkCollision()) { gameState = 'gameover'; messageDisplay.textContent = `加油加油！下次會更好！`; }
            }
            draw(); gameLoop = requestAnimationFrame(gameLoopFn);
        }

        function resetGame() { 
            bird.y = canvas.height/2; 
            bird.velocity = 0; 
            pipes = []; 
            score = 0; 
            frame = 0; 
            pipeSpeed = BASE_PIPE_SPEED;
            scoreDisplay.textContent = '0'; 
        }
        function handleInput(e) { 
            if (e.type === 'click' || e.code === 'Space' || e.code === 'ArrowUp' || e.key === 'ArrowUp') { 
                e.preventDefault(); // 防止頁面捲動
                bird.flap(); 
            } 
        }
        function resizeCanvas() { const container = document.getElementById('game-container'); canvas.width = container.clientWidth; canvas.height = canvas.width * (576/320); bird.x = 60; bird.y = canvas.height/2; draw(); }

        document.addEventListener('DOMContentLoaded', () => { resizeCanvas(); document.addEventListener('keydown', handleInput); canvas.addEventListener('click', handleInput); gameLoopFn(); window.addEventListener('resize', resizeCanvas); });
    </script>

    <!-- YouTube 影片載入邏輯 -->
    <script>
        function loadYouTubeVideo(wrapperId) {
            const wrapper = document.getElementById(wrapperId);
            if (!wrapper || wrapper.getAttribute('data-loaded')) return;
            const videoId = wrapper.getAttribute('data-video-id');
            const iframe = document.createElement('iframe');
            iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1`;
            iframe.title = 'YouTube video player';
            iframe.frameBorder = '0';
            iframe.allow = 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share';
            iframe.allowFullscreen = true;
            iframe.classList.add('embed-responsive-item', 'rounded-3');
            wrapper.innerHTML = ''; wrapper.appendChild(iframe);
            wrapper.setAttribute('data-loaded', 'true'); wrapper.onclick = null;
        }
    </script>
</body>
</html>